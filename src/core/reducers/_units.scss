/// Updates the 'units' key of the store.
/// Multiplies all units by the base unit
///
/// @access private
/// @group core-reducers
/// @author Alain D'Ettorre <alain.det@gmail.com>
/// @require {function} pal-number-decimals
/// @require {function} pal-get
///
/// @param {Map} $store
/// @param {Map} $old-value
///
@function _pal-units-reducer($store, $old-value)
{
  $base-unit: map-get($store, 'unit');

  @if ($base-unit == null) {
    @return $store;
  }

  $units: map-get($store, 'units');

  @each $label, $factor in $units {
    $value: if($factor == 0, 0, $factor * $base-unit);
    $value: pal-number-decimals($value, pal-get('pal.decimals'));
    $units: map-merge($units, (#{$label}: $value));
  }

  @return map-merge($store, ('units': $units));
}
